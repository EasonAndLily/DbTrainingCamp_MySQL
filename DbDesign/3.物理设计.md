# 物理设计

本机主要的目的是学习物理设计的基本概念，掌握物理设计的几种方法。



## 概述

**定义：数据库的物理设计就是设计数据库的物理结果的过程，需要根据数据库的逻辑模型来选定DBMS，并设计和实施数据库的存储结构、存取方式等。**

从上面的定义可以看出，数据库的物理设计依赖于实体数据库，所以数据库的物理设计工作包括以下几点：

* **根据数据库模型来选择合适的DBMS。**
* **根据所选择的DBMS和数据模型特点来选择合适的数据库引擎。**
* **根据所选择的数据库引擎来定义库、表、字段等。**

接下来，我们一一讲解数据库物理设计的内容：



## 选择DBMS

常用的关系型DBMS有Oracle，SQLServer，MySQL，PgSQL等，要从这些DBMS里面选择合适的数据库DBMS，通常考虑两个方面：**应用特点和成本。**

我们在数据库概述一节中，介绍过下面一个表：

| 项目的规模 | 负载（负载量有多大，即用户数有多大）                         | 成本           | 安全性                     |
| :--------- | :----------------------------------------------------------- | -------------- | -------------------------- |
| 小型数据库 | 负载量小，用户大概100人之内 比如：留言板、信息管理系统       | 成本在千元之内 | 对安全性要求不高           |
| 中型数据库 | 日访问量5000~10000                                           | 成本在万元内   | 比如商务网站（安全性较高） |
| 大型数据库 | 海量负载，可以处理海量数据(sybase<oracle<db2(海量数据处理能力)) | 相对贵         | 安全性高                   |

通常来说，SQLServer和MySQL是属于中型数据库，应用于日均访问在10000左右的应用。Oracle和PgSQL是大型数据库，可以处理海量数据，而且可扩展能力比较强。另外，如果应用程序是用.NET来写的，并且部署在Window Server上，那么最好使用SQLServer，它是微软的产品，和微软的体系继承起来比较容易。如果是其他编程语言，比如JAVA/PHP/Node等，部署在Linux上，选择MySQL，PgSQL或者Oracle比较好。

另外，也需要考虑成本，通常，开源数据库成本较低。

![](http://ww1.sinaimg.cn/large/af4e9f79ly1g073fa2xsyj21fa0jemyj.jpg)



## 选择数据库引擎

不同的数据库拥有不同的数据库引擎，不同的引擎适用于不同的场景，下面我们看看MySQL的数据库常用数据库引擎：

| 存储引擎    | 是否支持事务 | 锁粒度 | 宜用                   | 忌用                     |
| ----------- | ------------ | ------ | ---------------------- | ------------------------ |
| MyISAM      | 否           | 表级锁 | SELECT                 | 写操作频繁               |
| MRG_MYISAM  | 否           | 表级锁 | 数据仓库               | 全局查找过多             |
| Innodb      | 支持         | 行级锁 | 事务处理               | 无                       |
| Archive     | 否           | 行级锁 | 日志，只支持插入和查询 | 需要随机读取、修改和删除 |
| Ndb cluster | 支持         | 行级锁 | 高可用性               | 大部分应用               |

由此可见，Innodb引擎适用于大部分场景，也是推荐的常用MySQL常用引擎。



* 字段类型的选择原则：

  ![](http://ww1.sinaimg.cn/large/af4e9f79gy1g073xh078jj21fe0myjvz.jpg)

  ![](http://ww1.sinaimg.cn/large/af4e9f79gy1g074307jzqj21em0ncn19.jpg)

  ![](http://ww1.sinaimg.cn/large/af4e9f79gy1g0791zs2jlj21ia0r4te7.jpg)

  ![](http://ww1.sinaimg.cn/large/af4e9f79gy1g0794typ9cj21i60qewjo.jpg)

  ![](http://ww1.sinaimg.cn/large/af4e9f79gy1g0799j51uij21hk0qcgqb.jpg)

  ![](http://ww1.sinaimg.cn/large/af4e9f79ly1g079d8vygej21hs0qytg7.jpg)

  ![](http://ww1.sinaimg.cn/large/af4e9f79ly1g079fms5u2j21fu0la777.jpg)

  ![](http://ww1.sinaimg.cn/large/af4e9f79ly1g079k1t0o2j21h60q8q70.jpg)

1. 根据所选的DBMS选择合适的字段类型
2. 反范式话设计



