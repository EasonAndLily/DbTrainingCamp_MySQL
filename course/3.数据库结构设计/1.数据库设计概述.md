# 数据库设计概述

![database-design](https://tva1.sinaimg.cn/large/008i3skNgy1grhyn1xp0bj30hq09zq42.jpg)

本节需要掌握数据库设计的基本概念以及基本步骤。

## 数据库设计

在现实生活中，我  们需要盖一座大厦，就需要一份图纸来施工，而这份图纸的设计过程就好比是数据库的设计过程。所以掌握数据库的设计是非常重要的事情，接下来我们就详细讲解：

### 什么是数据库设计？

>**Database design** is the organisation of data according to a [database model](https://en.wikipedia.org/wiki/Database_model). The designer determines what data must be stored and how the data elements interrelate. With this information, they can begin to fit the data to the database model.

从上面的定义可以看出，数据库设计就是在寻求数据存储的最优解。主要解决两个问题：

1. 什么样的数据可以被存储？
2. 数据以什么形式被存储？

为了回答这两个问题而设计的模型，就是前面所说的那份建筑”*图纸*“, 数据库设计就是需求分析与数据存储之间的桥梁。

![database-design-processing](https://tva1.sinaimg.cn/large/008i3skNgy1grhy8odwocj30mo066t8m.jpg)

### 为什么需要数据库设计？

如果要回答为什么需要数据库设计这个问题，倒不如看看没有经过设计的数据库(成为糟糕的数据库设计)与经过良好设计的数据库之间有哪些不同：

|              | 糟糕的数据库设计                     | 良好的数据库设计 |
| ------------ | ------------------------------------ | ---------------- |
| 数据整洁性   | 存在大量的数据冗余                   | 较少的数据冗余   |
| 数据可维护性 | 数据在日常运作(增删改查)中会出现异常 | 较少的数据异常   |
| 数据存储空间 | 浪费大量存储空间                     | 节约存储空间     |
| 数据访问     | 数据访问低效                         | 数据访问高效     |

所以，数据库设计的目的是：
* 减少数据的冗余，尽量不要存在相同的实体和属性。
* 尽量避免数据维护中出现更新、插入和删除异常。
   - 插入异常：表中的某个实体随着另一个实体而存在。
   - 更新异常：更改表中某个实体的单独属性时，需要多多行进行更新。
   - 删除异常：删除表中的某一个实体则会导致其他实体的消失。
* 节约数据存储空间。
* 提高查询效率。

所以，良好的数据库逻辑设计和物理设计是数据库获得高性能的基础。

## 数据库设计步骤

数据库设计也存在着一定的步骤，请看下图：

![db-desgin-steps](https://tva1.sinaimg.cn/large/008i3skNgy1grhyb7pofyj31dq06e75a.jpg)

下面我们详细了解各个步骤的关系：

### 需求分析

需求分析是数据库设计最先要经历的步骤，也是最重要的步骤，直接决定了后面逻辑设计和物理设计。需求分析需要主要思考两个方面的问题：

1. **数据(实体)本身的问题：** 数据本身的问题主要要考虑下面几个问题：
   * 数据库中需要存储什么样的数据？
   * 这些数据的存储有什么特点？
   * 这些数据的生命周期是什么样？

   **举个例子：**比如学生这个实体来说，我们需要存储的数据就包括学号，姓名，性别，年龄，身份证等信息，这些信息都是和学生实体息息相关的，是属于学生不可分割的固有属性。这些数据大部分是文本信息，与学生的生命周期息息相关，只要学生存在，学生的这些数据就必须存在，学生删除，那么这些数据也要随之删除。

2. **数据与数据(实体与实体)之间的关系：** 这个数据就需要考虑两个或者多个实体数据之间的关系，需要回答下面的几个问题：
   * 实体与实体之间的关系？是一对一？一对多？还是多对多？
   * 那些属性和属性的组合可以唯一标识一个实体

   **举个例子：** 比如学生和学生成绩这两个实体数据，一个学生可以有多门考试成绩，一门考试成绩可以对应多个学生，所以他们之间是多对多的关系，一般情况来说，学号可以唯一标识一个学生，而学生成绩可能需要自定义一个主键来标识。

除了上面两个必须要考虑的问题之外，还需要兼顾：存储需求、数据处理需求、数据的安全性和完整性需求。

### 逻辑设计

这个过程是将需求分析的结果，运用数据库设计的基本范式，转化成实体关系图(Entity-Relation, ER)的过程。此过程不依赖于具体的数据库，可以是任何关系型数据库等。后面我们会详细介绍逻辑设计，本节不做重点讲解。

### 物理设计

物理设计是在逻辑设计的基础上，根据具体的数据特点，选择数据库和决定数据存储方式的过程。该设计要依赖于具体的数据库。后面我们会详细介绍，本节不做重点讲解。

### 维护调优

维护和调优是针对已经存在的数据库，不断改进和优化的过程，也是一个长期过程。后面的课程我们将陆续介绍。