# 范式设计及反范式设计

![db-design-nf](https://tva1.sinaimg.cn/large/008i3skNgy1grnyds5ubjj30m808wjtg.jpg)

通过前面的学习，我们知道，如果数据库符合三范式的基本要求，那么此数据库表基本上就解决了数据冗余过大，插入异常，修改异常和删除异常的问题。除了这三范式的要求之外，还存在的其他的范式要求，我们今天就来简单了解一下！

## BCNF范式

此范式与前面说的三大范式不同，三大范式每个范式前面都以数组命名，同时随着数组的增长，范式设计的要求就越高，后面的范式一旦成立，则前面的范式将必须也成立。但是这个范式并没有按照数字的命令，而是以人名：鲍依斯-科得范式来命名的。

这里有个问题，如果符合三范式设计的表，就一定不会存在插入异常、修改异常和删除异常了么？

要回答这个问题，我们先看一个例子吧！

一个学生可以学习多门课程，每个课程对应着一个老师，每个老师只能教一门课程，我们可以设计出如下的表：

|学生|课程|老师|
|:--:|:--:|:--:|
|张三|数学|李老师|
|张三|语文|张老师|
|李四|数学|李老师|
|李四|语文|刘老师|

毫无疑问，上面的表符合三范式的基本要求，但是依旧存在着：
* 插入异常：我们无法插入没有课程的学生，也无法插入没有教课的老师。
* 删除异常：如果我们要删除某个老师，那么将会删除这个老师所教课程的所有学生。
* 修改异常：如果我们要修改某个科目的老师，我们将修改关于很多学生学习此课程的老师。

所以，上面的数据库设计依旧不是很好的设计，到底是什么原因造成的呢？

我们发现：
* (学生 + 课程) -> 老师
* (课程 + 老师) -> 学生

所以，上面的表中存在的多个组合主键，多个组合的主键让这个表变得复杂了起来，这就是BCNF范式要解决的问题。

**数据库表中如果不存在任何字段对任一候选关键字段的传递函数依赖，则符合BC范式**

也就是说，如果数据库表中存在多个符合关键字，则复合关键字之间不能也不能存在函数依赖关系。

所以，对于上面的表，我们可以拆分为三个表：

* 学生表（学号，姓名，其他信息）
* 课程表（课程编号，课程名称，授课教师）
* 学生课程关系表（学号，课程编号）

这样，我们就解决了删除、插入和修改异常，符合BC范式啦！

